/**
 * Hero Section - What is Balanz
 */

.hero-section {
  position: relative; // Для позиционирования header относительно hero
  padding: 12px;
  background-color: $color-white;

  // Tablet: hide horizontal overflow for marquee, but allow vertical overflow
  @include until-tablet {
    overflow-x: hidden;
    overflow-y: visible;
  }

  @include desktop {
    padding: $space-48;
  }
}

// ============================================
// BACKGROUND IMAGE
// ============================================

.hero-bg {
  position: relative;
  max-width: 1344px;
  margin: 0 auto;
  border-radius: $radius-xl;
  overflow: hidden;
  z-index: 0;

  img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
}

.hero-container {
  // Keep container in normal flow so hero height adapts to content
  position: relative;
  width: 100%;
  max-width: 1344px;
  margin: 0 auto;
  padding: 156px $space-12;
  z-index: 1;

  @include desktop {
    padding: 156px $space-64;
  }
}

// ============================================
// HERO HEADER
// ============================================

.hero-header {
  text-align: center;
  margin-bottom: $space-48;
  padding: 0 $space-16;

  @include desktop {
    margin-bottom: $space-24;
    padding: 0;
  }
}

.hero-title {
  font-family: $font-heading;
  font-size: 2.5rem;
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
  margin-bottom: $space-16;
  color: $color-primary;

  @include desktop {
    font-size: $font-size-80;
  }
}

.hero-description {
  max-width: 640px;
  margin: 0 auto;
  font-size: $font-size-base;
  color: $color-gray-500;
  line-height: $line-height-relaxed;

  @include desktop {
    font-size: $font-size-18;
  }
}

// ============================================
// PROGRAMS GRID
// ============================================

.hero-programs {
  margin-bottom: $space-48;
  padding: 0 $space-16;

  // Tablet: remove padding for marquee to extend full width
  @include until-tablet {
    padding: 0;
  }

  @include desktop {
    margin-bottom: $space-64;
    padding: 0;
  }

  // Add bottom padding only when staggered layout is active
  @media (min-width: 1300px) {
    padding: 0 0 72px 0;
  }
}

.programs-grid {
  display: flex;
  gap: $space-24;
  justify-content: center;

  // Mobile & Tablet: hide until marquee is ready to prevent layout jump
  @include until-tablet {
    display: block;
    width: 100%;
    overflow: visible;
    min-height: 300px; // Reserve space to prevent content jump
    opacity: 0; // Hidden until JS initializes marquee
    transition: opacity 0.5s ease;

    // Reset vertical offsets for marquee
    .program-card {
      top: 0 !important;
      flex-shrink: 0;
    }
  }

  // When marquee is active (JS adds this class) - show cards
  &.marquee-active {
    @include until-tablet {
      opacity: 1;
      min-height: auto;
    }
  }

  // Desktop: centered grid with wrap
  @include desktop {
    flex-wrap: wrap;
    gap: $space-48;
    justify-content: center;
    align-items: flex-start;
  }

  // Staggered layout: only when all 4 cards fit in one row
  // Minimum width needed: 4 cards (254px) + 3 gaps (48px) + container padding (128px) = ~1300px
  @media (min-width: 1400px) {
    .program-card {
      // First card in each row (1, 5, 9...) - stays at baseline
      &:nth-child(4n + 1) {
        top: 0;
      }

      // Second card in each row (2, 6, 10...) - push down
      &:nth-child(4n + 2) {
        top: 72px;
      }

      // Third card in each row (3, 7, 11...) - push down
      &:nth-child(4n + 3) {
        top: 72px;
      }

      // Fourth card in each row (4, 8, 12...) - stays at baseline
      &:nth-child(4n) {
        top: 0;
      }
    }
  }

  // For smaller desktop screens - reset offsets to prevent misalignment
  @media (min-width: 901px) and (max-width: 1299px) {
    .program-card {
      top: 0 !important;
    }
  }
}

// Marquee track - created by JS, contains original + cloned cards
// Uses margin instead of gap for perfect 50% calculation
.marquee-track {
  display: flex;
  width: max-content;
  // Use will-change for smoother animation
  will-change: transform;
  animation: marqueeScroll 25s linear infinite;

  // Pause on hover
  &:hover {
    animation-play-state: paused;
  }

  // Each card has margin-right, so total width = n * (cardWidth + margin)
  // This makes 50% translation land exactly at clone start
  .program-card {
    flex-shrink: 0;
    margin-right: $space-32;
  }
}

// Seamless infinite marquee animation
// With margin on each card, 50% lands exactly where clones start
@keyframes marqueeScroll {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(-50%, 0, 0);
  }
}

// ============================================
// HERO CTA
// ============================================

.hero-cta {
  text-align: center;
  padding: 0 $space-16;

  @include desktop {
    padding: 0;
  }
}

.btn-download {
  background-color: $color-primary;
  color: $color-white;
  padding: $space-16 $space-48;
  border-radius: $radius-full;
  font-size: $font-size-base;
  font-weight: $font-weight-regular;
  transition: all $transition-base;
  box-shadow: $shadow-sm;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  &:hover {
    background-color: $color-primary-dark;
    transform: translateY(-2px);
    color: $color-white;
    box-shadow: $shadow-md;
  }

  @include desktop {
    font-size: $font-size-16;
  }
}
